<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Name of Product Here</title>
		<link rel="stylesheet" type="text/css" href="MainWindow.css" media="screen">
	</head>
	<body onload="sendReady()">
		<h1>Current Slide Deck</h1>
		<ul>
			<div class="slide" contenteditable="true">
				<h1 class="slide-title">This is a slide</h2>
				<p class="slide-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus iaculis orci vel ipsum sagittis, et laoreet dui pretium. Donec eget velit sapien. Aenean condimentum, urna ac mollis elementum, tellus justo ultrices tortor, id placerat urna nunc quis urna. Nulla enim diam, condimentum et sapien quis, blandit ornare erat. Maecenas a tortor auctor lorem ullamcorper facilisis eu eget lorem. Curabitur est sem, varius eu arcu sit amet, viverra mollis turpis. Fusce in purus quam. Ut pulvinar turpis et malesuada condimentum. Nulla nisi libero, lacinia quis dui a, dictum euismod libero. Duis metus neque, posuere non nibh a, facilisis facilisis risus. Nam dui augue, pharetra a dolor placerat, euismod aliquam augue.</p>
			</div>

			<div class="slide" contenteditable="true">
				<h1 class="slide-title">This is another slide</h1>
				<p class="slide-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce efficitur scelerisque augue, sit amet venenatis massa posuere in. Pellentesque suscipit, turpis sed sollicitudin ullamcorper, nisl lorem consectetur libero, a feugiat neque arcu a nisl. Integer porta lectus non ipsum condimentum, eu feugiat ex rhoncus. Nullam in nisl quis mi scelerisque posuere quis vitae nulla. Nunc tincidunt est bibendum enim pharetra volutpat. Fusce congue eu tortor vitae pretium. Mauris vehicula ipsum sit amet mauris porttitor, sed sodales ipsum semper. Pellentesque finibus elit id nibh dapibus volutpat. Phasellus tincidunt rhoncus tellus nec rutrum. Sed sem urna, laoreet id molestie sit amet, accumsan at urna. Suspendisse potenti. Nullam ut venenatis justo. Mauris interdum tellus id augue congue, vel malesuada felis hendrerit.</p>

				<p class="slide-text">Vivamus non faucibus tortor. Aenean congue accumsan neque, vel varius arcu lobortis sit amet. Donec ullamcorper iaculis sem a efficitur. Phasellus rutrum et justo at sollicitudin. Sed euismod placerat ipsum ac ultrices. Vivamus sagittis fringilla blandit. Curabitur suscipit dolor dolor, ut efficitur velit posuere sit amet. Suspendisse potenti.</p>
			</div>
		</ul>
		<script>
			//(1)add deck display
			const electron = require('electron');
			const mathJax = require('mathjax-electron');
			const {ipcRenderer} = electron;
			const ul = document.querySelector('ul');

			function sendReady(){
				ipcRenderer.send('MainReady',null);
			}

			ipcRenderer.on('item:add',function(e,info){
				ul.innerHTML = "";
				for(var index in info){
					item = info[index];
					//make the div and text for the slide
					const newSlide = document.createElement('div');
					const itemTitle = document.createElement('h1');
					const itemText = document.createElement('p');

					//set their classes
					newSlide.className = "slide";
					itemTitle.className = "slide-title";
					itemText.className = "slide-text";

					//populate the text
					itemTitle.append(item[0]);
					itemText.append(item[2]);

					//make the text editable
					itemTitle.contentEditable= "true";
					itemText.contentEditable = "true";

					//add them to the slide
					newSlide.appendChild(itemTitle);
					newSlide.appendChild(itemText);

					//add the new slide to the list
					ul.append(newSlide);
				}
			});

			ipcRenderer.on('load',function(e,info){
				ul.innerHTML = "";
				for(var index in info){
					item = info[index];
					//make the div and text for the slide
					const newSlide = document.createElement('div');
					const itemTitle = document.createElement('h1');
					const itemText = document.createElement('p');

					//set their classes
					newSlide.className = "slide";
					itemTitle.className = "slide-title";
					itemText.className = "slide-text";

					//populate the text
					itemTitle.append(item[0]);
					itemText.append(item[2]);

					//make the text editable
					itemTitle.contentEditable= "true";
					itemText.contentEditable = "true";

					//add them to the slide
					newSlide.appendChild(itemTitle);
					newSlide.appendChild(itemText);

					//add the new slide to the list
					ul.append(newSlide);
				}
			});

			ipcRenderer.on('pleaseSend',function(e,item){
				list = ul.children;
				finalList = [];
				for(var index = 0; index < list.length; index++){
					var currentSlide = list[index];
					listChildren = currentSlide.children;
					tempList = [];
					for(var indexI = 0; indexI < listChildren.length; indexI++){
						var currentNode = listChildren[indexI];
						tempList.push(currentNode.innerHTML);
					}
					tempList.push(index);
					finalList.push(tempList);
				}
				ipcRenderer.send('SlideDeckUpdates',finalList);
			});

		</script>
		<script src="./node_modules/mathjax-electron/resources/MathJax/MathJax.js?config=electron">
			
		</script>
	</body>
</html>
